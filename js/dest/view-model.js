var ViewModel=function(){var a=this,b=function(b){this.title=ko.observable(b.title),this.location=ko.observable(b.location),this.tag=ko.observable(b.tag),this.isVisible=ko.observable(!0),this.marker=b.marker,this.clickCount=0,this.setMarker=function(){this.marker.setMap(map),a.selectedTag("empty")},this.removeMarker=function(){this.marker.setMap(null),a.selectedTag("empty")},this.toggleMarker=function(){this.clickCount++,this.clickCount%2!=1?this.setMarker():this.removeMarker()},this.tipText=ko.observable('<span class="tooltiptext">Dubble click to hide the pin.</span>')};a.locationList=ko.observableArray([]),locations.forEach(function(c){a.locationList.push(new b(c))}),a.restaurantTag=ko.observableArray([]),function(){index={};for(var b=0,c=locations.length;b<c;b++){var d=locations[b].tag;index[d]||(index[d]=!0,a.restaurantTag.push(d))}}(),a.restaurantTag().sort(),a.selectedTag=ko.observable(""),a.matchTag=ko.computed(function(){if("empty"!=a.selectedTag())for(var b=0,c=a.locationList().length;b<c;b++){var d=a.locationList()[b].tag().indexOf(a.selectedTag())!=-1;d?(a.locationList()[b].isVisible(!0),locations[b].visibility=!0,locations[b].marker.setMap(map)):(a.locationList()[b].isVisible(!1),locations[b].visibility=!1,locations[b].marker.setMap(null))}},this),a.searchText=ko.observable(""),a.search=ko.computed(function(){for(var b=0,c=a.locationList().length;b<c;b++){var d=a.locationList()[b].title().toLowerCase().indexOf(a.searchText().toLowerCase())!=-1;d?(a.locationList()[b].isVisible(!0),locations[b].visibility=!0,locations[b].marker.setMap(map)):(a.locationList()[b].isVisible(!1),locations[b].visibility=!1,locations[b].marker.setMap(null))}},this)};